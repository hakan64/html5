<canvas id="canvas" tabindex="1" width="300" height="300"></canvas>
<script type="text/javascript">
var b,c,e,f,g,h,k=1,l=3,m=0,n=2,p,q,s,t,u,v;function w(a){5>s.length&&s.push(a)}function x(){e=0;t=k;s=[];u=[];v={};v.x=Math.round(Math.random()*(f/h));v.y=Math.round(Math.random()*(g/h));p=Math.round(f/h/2);q=Math.round(g/h/2);var a={};a.x=p;a.y=q;u.push(a)} function y(){c.fillStyle="black";c.fillRect(0,0,f,g);for(var a=0;a<u.length;a++){var r=u[a];c.fillStyle="blue";c.fillRect(r.x*h,r.y*h,h,h)}c.fillStyle="red";c.fillRect(v.x*h,v.y*h,h,h);c.fillStyle="white";c.font="bold "+h+"px Arial";c.fillText("Score: "+e,h,h);0<s.length&&(d=s.shift(),d!=t&&(d-2)%4!=t&&(t=d));switch(t){case k:p--;break;case l:p++;break;case m:q--;break;case n:q++}for(a=0;a<u.length;a++)if(r=u[a],r.x==p&&r.y==q||p>f/h||0>p||q>g/h||0>q)alert("Game Over! Score: "+e),x();p==v.x&&q==v.y? (a={},a.x=p,a.y=q,u.push(a),v.x=Math.round(Math.random()*(f/h)),v.y=Math.round(Math.random()*(g/h)),e+=10):(a=u.shift(),a.x=p,a.y=q,u.push(a))}function z(a){switch(a.keyCode){case 37:w(k);break;case 38:w(m);break;case 39:w(l);break;case 40:w(n)}}window.onload=function(){b=document.getElementById("canvas");b.focus();c=b.getContext("2d");f=b.width;g=b.height;h=10;x();b.addEventListener("keypress",z,!0);setInterval(y,200)};
</script>
